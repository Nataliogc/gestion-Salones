<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plano de Distribución - MesaChef</title>
    <link rel="icon" type="image/png" href="Img/mesa-chef-192.png" />
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/grandes-eventos-map.css" />

    <!-- Firebase Scripts -->
    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>
    <script src="js/firebase-init.js"></script>
</head>

<body style="background-color: #f8fafc; padding: 20px;">

    <div class="card" style="max-width: 1300px; margin: 0 auto; height: 90vh; display: flex; flex-direction: column;">
        <div style="margin-bottom: 16px; display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h2 id="evtTitle" style="margin: 0; color: #0f172a;">Cargando Evento...</h2>
                <span id="evtSubtitle" style="color: #64748b; font-size: 14px;"></span>
            </div>
            <div>
                <button id="btnClose" onclick="window.close()" class="btn-secondary">Cerrar</button>
            </div>
        </div>

        <div style="display: flex; flex: 1; overflow: hidden; gap: 16px;">
            <!-- SIDEBAR: Unassigned -->
            <div class="sidebar-panel"
                style="width: 250px; display: flex; flex-direction: column; background: #fff; border-right: 1px solid #e2e8f0; border-radius: 8px 0 0 8px;">
                <div style="padding: 12px; background: #f8fafc; border-bottom: 1px solid #e2e8f0;">
                    <h3 style="margin: 0; font-size: 14px; color: #475569;">Sin Asignar</h3>
                    <input type="text" id="searchUnassigned" placeholder="Buscar..." class="form-input"
                        style="font-size: 12px; margin-top: 8px;">
                </div>
                <div id="unassignedList"
                    style="flex: 1; overflow-y: auto; padding: 8px; display: flex; flex-direction: column; gap: 8px;">
                    <!-- Draggable items injected here -->
                    <div style="font-size: 12px; color: #94a3b8; text-align: center; margin-top: 20px;">Cargando...
                    </div>
                </div>
            </div>

            <!-- MAIN: Map Canvas -->
            <div style="flex: 1; display: flex; flex-direction: column;">
                <!-- Toolbar -->
                <div class="map-toolbar" style="margin-bottom: 12px;">
                    <button id="btnAddRound" class="btn-secondary" style="font-size:12px;">+ Redonda</button>
                    <button id="btnAddSquare" class="btn-secondary" style="font-size:12px;">+ Cuadrada</button>
                    <button id="btnAddRect" class="btn-secondary" style="font-size:12px;">+ Rectangular</button>
                    <div style="flex:1;"></div>
                    <button id="btnAutoLayout" class="btn-primary"
                        style="background: linear-gradient(135deg, #6366f1, #8b5cf6); border:none;">✨ Auto</button>
                    <button id="btnSaveMap" class="btn-primary">Guardar</button>
                </div>

                <div id="mapCanvas" class="map-canvas"
                    style="flex: 1; height: auto; border: 1px dashed #cbd5e1; border-radius: 8px;">
                    <!-- Canvas -->
                </div>
            </div>
        </div>
    </div>

    <script src="js/plano-evento.js"></script>
</body>

</html>